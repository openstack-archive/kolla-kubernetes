apiVersion: v1
kind: Service
spec:
  ports:
    - port: {{ .Values.port }}
      targetPort: {{ .Values.port }}
      name: "{{ .Values.element_name }}-public"
{{- if .Values.keystone_nodeport }}
      nodePort: {{ .Values.keystone_nodeport }}
  type: NodePort
{{- else if  .Values.keystone_external }}
  externalIPs:
    - {{ .Values.kolla_kubernetes_external_vip }}
{{- end }}
  selector:
    service: {{ .Values.element_name | quote }}
    type: api
metadata:
   name:  "{{ .Values.element_name }}-public"
