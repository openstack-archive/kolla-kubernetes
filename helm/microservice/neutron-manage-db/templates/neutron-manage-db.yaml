{{- $resourceName := "neutron-server" }}
{{- $serviceName := "neutron" }}
{{- $serviceType := "manage-db" }}
{{- $elementName := .Values.element_name | default $serviceName }}
{{- $elementType := .Values.element_type | $serviceType }}
{{- $configmap := "neutron-server" }}
{{- $podTypeBootstrap := true }}
{{- $extraConfigmapConfig := "neutron_extra_configmap_config" }}
{{- define "neutron_extra_configmap_config" }}
items:
- key: neutron.conf
  path: neutron.conf
- key: config.json
  path: config.json
- key: ml2-conf.ini
  path: ml2_conf.ini
- key: neutron-lbaas.conf
  path: neutron_lbaas.conf
- key: neutron-vpnaas.conf
  path: neutron_vpnaas.conf
{{- end }}
{{- with $env := dict "resourceName" $resourceName "serviceName" $serviceName "serviceType" $serviceType "elementName" $elementName "elementType" $elementType "configmap" $configmap "podTypeBootstrap" $podTypeBootstrap "extraConfigmapConfig" $extraConfigmapConfig  "Values" .Values "Release" .Release }}
{{- $imagePrefix := include "kolla_image_built_prefix" $env }}
{{- $imageBuilt := printf "%s-neutron-server:%s" $imagePrefix .Values.image_tag }}
{{- $imageFull := .Values.image_full | default $imageBuilt }}
{{- $_ := set $env "imageFull" $imageFull }}
{{- include "common_manage_db_job" $env }}
{{- end }}
