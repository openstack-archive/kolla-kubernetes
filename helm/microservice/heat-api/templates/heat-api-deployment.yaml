{{- $resourceName := "heat-api" }}
{{- $netHostTrue := false }}
{{- $podTypeBootstrap := false }}
{{- $serviceName := "heat" }}
{{- $serviceType := "api" }}
{{- $elementName := .Values.element_name | default $serviceName }}
{{- $elementType := .Values.element_type | $serviceType }}
{{- $configFileName := "heat.conf" }}
{{- $configSectionName := "DEFAULT" }}
{{- $configListenHostParameter := "bind_host" }}
{{- $configListenPortParameter := "bind_port" }}
{{- $portName := "heat-api" }}
{{- $checkPath := "/" }}
{{- $extraConfigmapConfig := "heat_api_extra_configmap_config" }}
{{- $privileged := false }}
{{- define "heat_api_extra_configmap_config" }}
items:
- key: heat.conf
  path: heat.conf
- key: policy.json
  path: policy.json
- key: api-paste.ini
  path: api-paste.ini
{{- end }}
{{- with $env := dict "netHostTrue" $netHostTrue "podTypeBootstrap" $podTypeBootstrap "resourceName" $resourceName "serviceName" $serviceName "serviceType" $serviceType "elementName" $elementName "elementType" $elementType "configFileName" $configFileName "configSectionName" $configSectionName "configListenHostParameter" $configListenHostParameter "configListenPortParameter" $configListenPortParameter "portName" $portName "checkPath" $checkPath "extraConfigmapConfig" $extraConfigmapConfig "privileged" $privileged "Values" .Values "Release" .Release }}
{{- $imagePrefix := include "kolla_image_built_prefix" $env }}
{{- $imageBuilt := printf "%s-heat-api:%s" $imagePrefix .Values.image_tag }}
{{- $imageFull := .Values.image_full | default $imageBuilt }}
{{- $_ := set $env "imageFull" $imageFull }}
{{- include "common_api_python_deployment" $env }}
{{- end }}
