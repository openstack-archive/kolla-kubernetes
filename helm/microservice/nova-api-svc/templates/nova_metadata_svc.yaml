apiVersion: v1
kind: Service
spec:
  ports:
    - port: {{ .Values.metadata_port }}
      targetPort: {{ .Values.metadata_port }}
      name: "{{ .Values.element_name }}-metadata"
{{- if  .Values.nova_api_metadata_external }}
  externalIPs:
    - {{ .Values.kolla_kubernetes_external_vip }}
{{- end }}
  selector:
    service: {{ .Values.element_name | quote }}
    type: api
metadata:
   name:  "{{ .Values.element_name }}-metadata"
