---
- hosts: mariadb
  roles:
    - { role: mariadb,
        when: enable_mariadb | bool }

- hosts: rabbitmq
  roles:
    - { role: rabbitmq,
        when: enable_rabbitmq | bool }

- hosts: keystone
  roles:
    - { role: keystone,
        when: enable_keystone | bool }

- hosts:
    - glance-api
    - glance-registry
  roles:
    - { role: glance,
        when: enable_glance | bool }

- hosts:
    - neutron-server
    - neutron-dhcp-agent
    - neutron-l3-agent
    - neutron-metadata-agent
    - neutron-openvswitch-agent
  roles:
    - { role: neutron,
        when: enable_neutron | bool }
