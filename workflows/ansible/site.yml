---
- hosts: mariadb
  roles:
    - { role: mariadb,
        when: enable_mariadb | bool }

- hosts: rabbitmq
  roles:
    - { role: rabbitmq,
        when: enable_rabbitmq | bool }

- hosts: keystone
  roles:
    - { role: keystone,
        when: enable_keystone | bool }

- hosts:
    - glance-api
    - glance-registry
  roles:
    - { role: glance,
        when: enable_glance | bool }

- hosts:
    - cinder-api
    - cinder-scheduler
  roles:
    - { role: cinder,
        when: enable_cinder | bool }